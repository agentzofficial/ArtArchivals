<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>agent z Art Archivals</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <img id="fixed-bg" alt="Background" />
    <div style="text-align: center;">
        <img src="serverImages/logo.png" alt="Art Archives Logo" style="max-width: 500px; height: auto;">
    </div>
    <div class="gallery" id="gallery"></div>

    <div id="modal" class="modal">
        <span class="close">&times;</span>
        <div class="modal-content">
            <img id="modal-img" src="" alt="">
            <h2 id="modal-title"></h2>
            <p id="modal-description"></p>
            <p id="modal-date" class="modal-date"></p>
            <div class="modal-icons">
            </div>
        </div>
    </div>

    <p class="navigation-hint">Use ← and → arrow keys to navigate</p>

    <script>
        let currentIndex = 0;
        let artData = [];

        const navigationHint = document.querySelector('.navigation-hint');
        const gallery = document.getElementById('gallery');
        const modal = document.getElementById('modal');
        const modalImg = document.getElementById('modal-img');
        const modalTitle = document.getElementById('modal-title');
        const modalDesc = document.getElementById('modal-description');
        const modalDate = document.getElementById('modal-date');
        const closeBtn = document.querySelector('.close');

        fetch('data.json')
            .then(response => response.json())
            .then(data => {
                artData = data;

                data.forEach(item => {
                    const div = document.createElement('div');
                    div.className = 'art-item';
                    div.innerHTML = `
                        <div class="image-container">
                            <img src="images/${item.filename}" alt="${item.title}" style="object-position: ${item.position || 'center'};">
                            <div class="overlay">
                                <h2>${item.title}</h2>
                                <p class="date">${item.date || ''}</p>
                            </div>
                        </div>
                    `;
                    div.addEventListener('click', () => {
                        currentIndex = data.indexOf(item);
                        showModal(currentIndex);
                    });
                    gallery.appendChild(div);
                });
            });

        function showModal(index) {
            const item = artData[index];
            if (!item) return;

            modal.style.display = 'flex';
            navigationHint.style.display = 'block'; // Show the navigation hint

            modalImg.src = `images/${item.filename}`;
            modalImg.alt = item.title;
            modalTitle.textContent = item.title;
            modalDesc.textContent = item.description || '';
            modalDate.textContent = item.date || '';

            const modalIcons = document.querySelector('.modal-icons');
            modalIcons.innerHTML = '';
            if (item.youtube) {
                modalIcons.innerHTML += `<a href="${item.youtube}" target="_blank" class="source-icon"><img src="serverImages/youtube-icon.png" alt="YouTube"></a>`;
            }
            if (item.twitter) {
                modalIcons.innerHTML += `<a href="${item.twitter}" target="_blank" class="source-icon"><img src="serverImages/twitter-icon.png" alt="Twitter"></a>`;
            }
            if (item.bluesky) {
                modalIcons.innerHTML += `<a href="${item.bluesky}" target="_blank" class="source-icon"><img src="serverImages/bluesky-icon.png" alt="Bluesky"></a>`;
            }
        }

        closeBtn.onclick = () => {
            modal.style.display = 'none';
            navigationHint.style.display = 'none';
        };

        window.onclick = e => {
            if (e.target === modal) {
                modal.style.display = 'none';
                navigationHint.style.display = 'none';
            }
        };

        document.addEventListener('keydown', (e) => {
            if (modal.style.display === 'flex') {
                if (e.key === 'ArrowLeft' && currentIndex > 0) {
                    currentIndex--;
                    showModal(currentIndex);
                } else if (e.key === 'ArrowRight' && currentIndex < artData.length - 1) {
                    currentIndex++;
                    showModal(currentIndex);
                } else if (e.key === 'Escape') {
                    modal.style.display = 'none';
                    navigationHint.style.display = 'none';
                }
            }
        });
    </script>
    <script>
        const maxBackgrounds = 6;
        const bgIndex = Math.floor(Math.random() * maxBackgrounds) + 1;
        const bgImg = document.getElementById('fixed-bg');
        bgImg.src = `backgrounds/bg${bgIndex}.png`;
    </script>
</body>
</html>
